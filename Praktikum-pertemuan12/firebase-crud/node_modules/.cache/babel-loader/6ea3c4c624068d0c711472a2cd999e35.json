{"ast":null,"code":"var _jsxFileName = \"F:\\\\polinema\\\\semester 6\\\\PBF (Pemrograman Berbasis Framework)\\\\Pemrograman-Berbasis-Framework\\\\Praktikum-pertemuan12\\\\firebase-crud\\\\src\\\\container\\\\BlogPost\\\\BlogPost.jsx\";\nimport React, { Component } from \"react\";\nimport \"./BlogPost.css\";\nimport Post from \"../../component/BlogPost/Post\";\nimport API from \"../../services\";\nimport * as firebase from \"firebase\";\nimport firebaseConfig from \"../../firebase/config\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nclass BlogPost extends Component {\n  constructor(props) {\n    super(props);\n\n    this.ambilDataDariSeverAPI = () => {\n      // fungsi untuk mengambil data dari API dengan penambahan sort dan order\n      let ref = firebase.database().ref(\"/\");\n      ref.on(\"value\", snapshot => {\n        const state = snapshot.val();\n      });\n    };\n\n    this.simpanDataKeServerAPI = () => {\n      firebase.database().ref(\"/\").set(this.state);\n    };\n\n    this.handleHapusArtikel = idArtikel => {\n      const {\n        listArtikel\n      } = this.state;\n      const newState = listArtikel.filter(data => {\n        return data.uid !== idArtikel;\n      });\n      this.setState({\n        listArtikel: newState\n      });\n    };\n\n    this.handleTombolSimpan = event => {\n      // fungsi untuk meng-handle tombol simpan\n      let title = this.refs.judulArtikel.value;\n      let body = this.refs.isiArtikel.value;\n      let uid = this.refs.uid.value;\n\n      if (uid && title && body) {\n        const {\n          listArtikel\n        } = this.state;\n        const indeksArtikel = listArtikel.findIndex(data => {\n          return data.uid === uid;\n        });\n        listArtikel[indeksArtikel].title = title;\n        listArtikel[indeksArtikel].body = body;\n        this.setState({\n          listArtikel\n        });\n      } else if (title && body) {\n        const uid = new Date().getTime().toString();\n        const {\n          listArtikel\n        } = this.state;\n        listArtikel.push({\n          uid,\n          title,\n          body\n        });\n        this.setState({\n          listArtikel\n        });\n      }\n\n      this.refs.judulArtikel.value = \"\";\n      this.refs.isiArtikel.value = \"\";\n      this.refs.uid.value = \"\";\n    };\n\n    firebase.initializeApp(firebaseConfig); //initialisasi konfigurasi database firebase\n\n    this.state = {\n      listArtikel: []\n    };\n  }\n\n  componentDidMount() {\n    // komponen untuk mengecek ketika component telah dimounting, maka panggil API\n    this.ambilDataDariSeverAPI(); // ambil data dari server API lokal\n  }\n\n  componentDidUpdate(prevPropps, prevState) {\n    if (prevState !== this.state) {\n      this.simpanDataKeServerAPI();\n    }\n  }\n\n  render() {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"post-artikel\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"form pb-3 border-bottom\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"form-gorup row\",\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            htmlFor: \"title\",\n            className: \"col-sm-2 col-form-label\",\n            children: \" Judul \"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 83,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"col-sm-10\",\n            children: /*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"text\",\n              className: \"form-control\",\n              id: \"title\",\n              name: \"title\",\n              ref: \"judulArtikel\" // onChange={this.handleTambahArtikel}\n\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 85,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 84,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 82,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"form-group row\",\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            htmlFor: \"body\",\n            className: \"col-sm-2 col-form-label\",\n            children: \" Isi \"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 96,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"col-sm-10\",\n            children: /*#__PURE__*/_jsxDEV(\"textarea\", {\n              name: \"body\",\n              id: \"body\",\n              rows: \"3\",\n              className: \"form-control\",\n              ref: \"isiArtikel\" // onChange={this.handleTambahArtikel}\n\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 98,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 97,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 95,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"hidden\",\n          name: \"uid\",\n          ref: \"uid\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 108,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          type: \"submit\",\n          className: \"btn btn-primary\",\n          onClick: this.handleTombolSimpan,\n          children: \" Simpan \"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 109,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 81,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"h2\", {\n        children: \"Daftar Artikel\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 111,\n        columnNumber: 9\n      }, this), this.state.listArtikel.map(artikel => {\n        // looping dan masukkan untuk setiap data yang ada di listArtikel ke variabel artikel\n        return /*#__PURE__*/_jsxDEV(Post, {\n          judul: artikel.title,\n          isi: artikel.body,\n          idArtikel: artikel.uid,\n          hapusArtikel: this.handleHapusArtikel\n        }, artikel.uid, false, {\n          fileName: _jsxFileName,\n          lineNumber: 115,\n          columnNumber: 13\n        }, this); // mappingkan data json dari API sesuai dengan kategorinya\n      })]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 80,\n      columnNumber: 7\n    }, this);\n  }\n\n}\n\nexport default BlogPost;","map":{"version":3,"names":["React","Component","Post","API","firebase","firebaseConfig","BlogPost","constructor","props","ambilDataDariSeverAPI","ref","database","on","snapshot","state","val","simpanDataKeServerAPI","set","handleHapusArtikel","idArtikel","listArtikel","newState","filter","data","uid","setState","handleTombolSimpan","event","title","refs","judulArtikel","value","body","isiArtikel","indeksArtikel","findIndex","Date","getTime","toString","push","initializeApp","componentDidMount","componentDidUpdate","prevPropps","prevState","render","map","artikel"],"sources":["F:/polinema/semester 6/PBF (Pemrograman Berbasis Framework)/Pemrograman-Berbasis-Framework/Praktikum-pertemuan12/firebase-crud/src/container/BlogPost/BlogPost.jsx"],"sourcesContent":["import React, { Component } from \"react\";\nimport \"./BlogPost.css\";\nimport Post from \"../../component/BlogPost/Post\";\nimport API from \"../../services\";\nimport * as firebase from \"firebase\";\nimport firebaseConfig from \"../../firebase/config\";\n\nclass BlogPost extends Component {\n  constructor(props) {\n    super(props);\n    firebase.initializeApp(firebaseConfig); //initialisasi konfigurasi database firebase\n\n    this.state = {\n      listArtikel: []\n    }\n  }\n\n  ambilDataDariSeverAPI = () => {\n    // fungsi untuk mengambil data dari API dengan penambahan sort dan order\n    let ref = firebase.database().ref(\"/\");\n    ref.on(\"value\", snapshot => {\n      const state = snapshot.val();\n    });\n  }\n\n  simpanDataKeServerAPI = () => {\n    firebase.database()\n      .ref(\"/\")\n      .set(this.state)\n  }\n\n  componentDidMount() {\n    // komponen untuk mengecek ketika component telah dimounting, maka panggil API\n    this.ambilDataDariSeverAPI(); // ambil data dari server API lokal\n  }\n\n  componentDidUpdate(prevPropps, prevState) {\n    if (prevState !== this.state) {\n      this.simpanDataKeServerAPI();\n    }\n  }\n\n  handleHapusArtikel = (idArtikel) => {\n    const { listArtikel } = this.state;\n    const newState = listArtikel.filter(data => {\n      return data.uid !== idArtikel;\n    });\n    this.setState({ listArtikel: newState });\n  };\n\n  handleTombolSimpan = (event) => {\n    // fungsi untuk meng-handle tombol simpan\n    let title = this.refs.judulArtikel.value;\n    let body = this.refs.isiArtikel.value;\n    let uid = this.refs.uid.value;\n\n    if (uid && title && body) {\n      const { listArtikel } = this.state;\n      const indeksArtikel = listArtikel.findIndex(data => {\n        return data.uid === uid;\n      });\n      listArtikel[indeksArtikel].title = title;\n      listArtikel[indeksArtikel].body = body;\n      this.setState({ listArtikel });\n\n    } else if (title && body) {\n      const uid = new Date().getTime().toString();\n      const { listArtikel } = this.state;\n      listArtikel.push({ uid, title, body });\n      this.setState({ listArtikel });\n    }\n\n    this.refs.judulArtikel.value = \"\";\n    this.refs.isiArtikel.value = \"\";\n    this.refs.uid.value = \"\";\n  };\n\n  render() {\n    return (\n      <div className=\"post-artikel\">\n        <div className=\"form pb-3 border-bottom\">\n          <div className=\"form-gorup row\">\n            <label htmlFor=\"title\" className=\"col-sm-2 col-form-label\"> Judul </label>\n            <div className=\"col-sm-10\">\n              <input\n                type=\"text\"\n                className=\"form-control\"\n                id=\"title\"\n                name=\"title\"\n                ref=\"judulArtikel\"\n              // onChange={this.handleTambahArtikel}\n              />\n            </div>\n          </div>\n          <div className=\"form-group row\">\n            <label htmlFor=\"body\" className=\"col-sm-2 col-form-label\"> Isi </label>\n            <div className=\"col-sm-10\">\n              <textarea\n                name=\"body\"\n                id=\"body\"\n                rows=\"3\"\n                className=\"form-control\"\n                ref=\"isiArtikel\"\n              // onChange={this.handleTambahArtikel}\n              ></textarea>\n            </div>\n          </div>\n          <input type=\"hidden\" name=\"uid\" ref=\"uid\" />\n          <button type=\"submit\" className=\"btn btn-primary\" onClick={this.handleTombolSimpan}> Simpan </button>\n        </div>\n        <h2 >Daftar Artikel</h2>\n        {this.state.listArtikel.map((artikel) => {\n          // looping dan masukkan untuk setiap data yang ada di listArtikel ke variabel artikel\n          return (\n            <Post\n              key={artikel.uid}\n              judul={artikel.title}\n              isi={artikel.body}\n              idArtikel={artikel.uid}\n              hapusArtikel={this.handleHapusArtikel}\n            />\n          ); // mappingkan data json dari API sesuai dengan kategorinya\n        })}\n      </div>\n    );\n  }\n}\n\nexport default BlogPost;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}