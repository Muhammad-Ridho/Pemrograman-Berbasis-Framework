{"ast":null,"code":"var _jsxFileName = \"F:\\\\polinema\\\\semester 6\\\\PBF (Pemrograman Berbasis Framework)\\\\Pemrograman-Berbasis-Framework\\\\Praktikum-pertemuan12\\\\firebase-crud\\\\src\\\\container\\\\BlogPost\\\\BlogPost.jsx\";\nimport React, { Component } from \"react\";\nimport \"./BlogPost.css\";\nimport Post from \"../../component/BlogPost/Post\";\nimport API from \"../../services\";\nimport firebase from \"firebase/compat/app\";\nimport firebaseConfig from \"../../firebase/config\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nclass BlogPost extends Component {\n  constructor(props) {\n    super(props);\n\n    this.ambilDataDariSeverAPI = () => {\n      // fungsi untuk mengambil data dari API dengan penambahan sort dan order\n      let ref = firebase.database().ref(\"/\");\n      ref.on(\"value\", snapshot => {\n        const state = snapshot.val();\n      });\n    };\n\n    this.simpanDataKeServerAPI = () => {\n      firebase.database().ref(\"/\").set(this.state);\n    };\n\n    this.handleHapusArtikel = idArtikel => {\n      const {\n        listArtikel\n      } = this.state;\n      const newState = listArtikel.filter(data => {\n        return data.uid !== idArtikel;\n      });\n      this.setState({\n        listArtikel: newState\n      });\n    };\n\n    this.handleTambahArtikel = event => {\n      // fungsi untuk meng-handle form tambah data artikel\n      let formInsertArtikel = { ...this.state.insertArtikel\n      }; // cloning data state insertArtikel ke dalam variabel formInsertArtikel\n\n      let timestamp = new Date().getTime(); // digunakan untuk menyimpan waktu (sebagai id artikel)\n\n      formInsertArtikel[\"id\"] = timestamp;\n      formInsertArtikel[event.target.name] = event.target.value; // menyimpan data onChange ke formInsertArtikel sesuai dengn target yang diisi\n\n      this.setState({\n        insertArtikel: formInsertArtikel\n      });\n    };\n\n    this.handleTombolSimpan = event => {\n      // fungsi untuk meng-handle tombol simpan\n      let title = this.refs.judulArtikel.value;\n      let body = this.refs.isiArtikel.value;\n      let uid = this.refs.uid.value;\n\n      if (uid && title && body) {\n        const {\n          listArtikel\n        } = this.state;\n        const indeksArtikel = listArtikel.findIndex(data => {\n          return data.uid === uid;\n        });\n        listArtikel[indeksArtikel].title = title;\n        listArtikel[indeksArtikel].body = body;\n        this.setState({\n          listArtikel\n        });\n      } else if (title && body) {\n        const uid = new Date().getTime().toString();\n        const {\n          listArtikel\n        } = this.state;\n        listArtikel.push({\n          uid,\n          title,\n          body\n        });\n        this.setState({\n          listArtikel\n        });\n      }\n\n      this.refs.judulArtikel.value = \"\";\n      this.refs.isiArtikel.value = \"\";\n      this.refs.uid.value = \"\";\n    };\n\n    firebase.initializeApp(firebaseConfig); //initialisasi konfigurasi database firebase\n\n    this.state = {\n      listArtikel: []\n    };\n  }\n\n  componentDidMount() {\n    // komponen untuk mengecek ketika component telah dimounting, maka panggil API\n    this.ambilDataDariSeverAPI(); // ambil data dari server API lokal\n  }\n\n  componentDidUpdate(prevPropps, prevState) {\n    if (prevState !== this.state) {\n      this.simpanDataKeServerAPI();\n    }\n  }\n\n  render() {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"post-artikel\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"form pb-3 border-bottom\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"form-gorup row\",\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            htmlFor: \"title\",\n            className: \"col-sm-2 col-form-label\",\n            children: \" Judul \"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 94,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"col-sm-10\",\n            children: /*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"text\",\n              className: \"form-control\",\n              id: \"title\",\n              name: \"title\",\n              ref: \"judulArtikel\" // onChange={this.handleTambahArtikel}\n\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 96,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 95,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 93,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"form-group row\",\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            htmlFor: \"body\",\n            className: \"col-sm-2 col-form-label\",\n            children: \" Isi \"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 107,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"col-sm-10\",\n            children: /*#__PURE__*/_jsxDEV(\"textarea\", {\n              name: \"body\",\n              id: \"body\",\n              rows: \"3\",\n              className: \"form-control\",\n              ref: \"isiArtikel\" // onChange={this.handleTambahArtikel}\n\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 109,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 108,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 106,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"hidden\",\n          name: \"uid\",\n          ref: \"uid\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 119,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          type: \"submit\",\n          className: \"btn btn-primary\",\n          onClick: this.handleTombolSimpan,\n          children: \" Simpan \"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 120,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 92,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"h2\", {\n        children: \"Daftar Artikel\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 122,\n        columnNumber: 9\n      }, this), this.state.listArtikel.map(artikel => {\n        // looping dan masukkan untuk setiap data yang ada di listArtikel ke variabel artikel\n        return /*#__PURE__*/_jsxDEV(Post, {\n          judul: artikel.title,\n          isi: artikel.body,\n          idArtikel: artikel.uid,\n          hapusArtikel: this.handleHapusArtikel\n        }, artikel.uid, false, {\n          fileName: _jsxFileName,\n          lineNumber: 126,\n          columnNumber: 13\n        }, this); // mappingkan data json dari API sesuai dengan kategorinya\n      })]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 91,\n      columnNumber: 7\n    }, this);\n  }\n\n}\n\nexport default BlogPost;","map":{"version":3,"names":["React","Component","Post","API","firebase","firebaseConfig","BlogPost","constructor","props","ambilDataDariSeverAPI","ref","database","on","snapshot","state","val","simpanDataKeServerAPI","set","handleHapusArtikel","idArtikel","listArtikel","newState","filter","data","uid","setState","handleTambahArtikel","event","formInsertArtikel","insertArtikel","timestamp","Date","getTime","target","name","value","handleTombolSimpan","title","refs","judulArtikel","body","isiArtikel","indeksArtikel","findIndex","toString","push","initializeApp","componentDidMount","componentDidUpdate","prevPropps","prevState","render","map","artikel"],"sources":["F:/polinema/semester 6/PBF (Pemrograman Berbasis Framework)/Pemrograman-Berbasis-Framework/Praktikum-pertemuan12/firebase-crud/src/container/BlogPost/BlogPost.jsx"],"sourcesContent":["import React, { Component } from \"react\";\nimport \"./BlogPost.css\";\nimport Post from \"../../component/BlogPost/Post\";\nimport API from \"../../services\";\nimport firebase from \"firebase/compat/app\";\nimport firebaseConfig from \"../../firebase/config\";\n\nclass BlogPost extends Component {\n  constructor(props) {\n    super(props);\n    firebase.initializeApp(firebaseConfig); //initialisasi konfigurasi database firebase\n\n    this.state = {\n      listArtikel: []\n    }\n  }\n\n  ambilDataDariSeverAPI = () => {\n    // fungsi untuk mengambil data dari API dengan penambahan sort dan order\n    let ref = firebase.database().ref(\"/\");\n    ref.on(\"value\", snapshot => {\n      const state = snapshot.val();\n    });\n  }\n\n  simpanDataKeServerAPI = () => {\n    firebase.database()\n      .ref(\"/\")\n      .set(this.state)\n  }\n\n  componentDidMount() {\n    // komponen untuk mengecek ketika component telah dimounting, maka panggil API\n    this.ambilDataDariSeverAPI(); // ambil data dari server API lokal\n  }\n\n  componentDidUpdate(prevPropps, prevState) {\n    if (prevState !== this.state) {\n      this.simpanDataKeServerAPI();\n    }\n  }\n\n  handleHapusArtikel = (idArtikel) => {\n    const { listArtikel } = this.state;\n    const newState = listArtikel.filter(data => {\n      return data.uid !== idArtikel;\n    });\n    this.setState({ listArtikel: newState });\n  };\n\n  handleTambahArtikel = (event) => {\n    // fungsi untuk meng-handle form tambah data artikel\n    let formInsertArtikel = { ...this.state.insertArtikel }; // cloning data state insertArtikel ke dalam variabel formInsertArtikel\n    let timestamp = new Date().getTime(); // digunakan untuk menyimpan waktu (sebagai id artikel)\n    formInsertArtikel[\"id\"] = timestamp;\n    formInsertArtikel[event.target.name] = event.target.value; // menyimpan data onChange ke formInsertArtikel sesuai dengn target yang diisi\n    this.setState({\n      insertArtikel: formInsertArtikel,\n    });\n  };\n\n  handleTombolSimpan = (event) => {\n    // fungsi untuk meng-handle tombol simpan\n    let title = this.refs.judulArtikel.value;\n    let body = this.refs.isiArtikel.value;\n    let uid = this.refs.uid.value;\n\n    if (uid && title && body) {\n      const { listArtikel } = this.state;\n      const indeksArtikel = listArtikel.findIndex(data => {\n        return data.uid === uid;\n      });\n      listArtikel[indeksArtikel].title = title;\n      listArtikel[indeksArtikel].body = body;\n      this.setState({ listArtikel });\n\n    } else if (title && body) {\n      const uid = new Date().getTime().toString();\n      const { listArtikel } = this.state;\n      listArtikel.push({ uid, title, body });\n      this.setState({ listArtikel });\n    }\n\n    this.refs.judulArtikel.value = \"\";\n    this.refs.isiArtikel.value = \"\";\n    this.refs.uid.value = \"\";\n  };\n\n  render() {\n    return (\n      <div className=\"post-artikel\">\n        <div className=\"form pb-3 border-bottom\">\n          <div className=\"form-gorup row\">\n            <label htmlFor=\"title\" className=\"col-sm-2 col-form-label\"> Judul </label>\n            <div className=\"col-sm-10\">\n              <input\n                type=\"text\"\n                className=\"form-control\"\n                id=\"title\"\n                name=\"title\"\n                ref=\"judulArtikel\"\n              // onChange={this.handleTambahArtikel}\n              />\n            </div>\n          </div>\n          <div className=\"form-group row\">\n            <label htmlFor=\"body\" className=\"col-sm-2 col-form-label\"> Isi </label>\n            <div className=\"col-sm-10\">\n              <textarea\n                name=\"body\"\n                id=\"body\"\n                rows=\"3\"\n                className=\"form-control\"\n                ref=\"isiArtikel\"\n              // onChange={this.handleTambahArtikel}\n              ></textarea>\n            </div>\n          </div>\n          <input type=\"hidden\" name=\"uid\" ref=\"uid\" />\n          <button type=\"submit\" className=\"btn btn-primary\" onClick={this.handleTombolSimpan}> Simpan </button>\n        </div>\n        <h2 >Daftar Artikel</h2>\n        {this.state.listArtikel.map((artikel) => {\n          // looping dan masukkan untuk setiap data yang ada di listArtikel ke variabel artikel\n          return (\n            <Post\n              key={artikel.uid}\n              judul={artikel.title}\n              isi={artikel.body}\n              idArtikel={artikel.uid}\n              hapusArtikel={this.handleHapusArtikel}\n            />\n          ); // mappingkan data json dari API sesuai dengan kategorinya\n        })}\n      </div>\n    );\n  }\n}\n\nexport default BlogPost;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}